---
number: 643
---
$$ (X, Y) $$ を平面上で考えると, 操作1は $$ y = x $$ に対して線対称な点に移す操作であり, 操作2は $$ \pi/4 $$ だけ時計回りに回転させて $$ x $$ 軸に対して線対称な点に移す操作である. 操作2は拡大操作も入っているが, 目標は $$ y = x $$ 上に移動することなのでここでは考えなくてもいい.

よって, 最初の状態で角度が $$ \pi/4 $$ の倍数になっていない場合はどうやってもたどりつけない.

そうでない場合は $$ k\pi/4 $$ の $$ k $$ ごとにどの状態に遷移できるかをグラフで表し, $$ k=1, 5 $$ への最短距離を求めておく. グラフは下図のようになる.

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="281px" height="281px" version="1.1" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36&quot; version=&quot;8.0.6&quot; editor=&quot;www.draw.io&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;31a8d12d-9c34-3218-2878-57c1d4a7f57f&quot; name=&quot;Page-1&quot;&gt;7Zldb5swFIZ/DbcV/iS5XLNuu5k0KRe79sABqwRHxmmS/fo5tfmySdVOXSBacxHh19g+POcFH5IIrbbHr4rtiu8y42UE4+wYoc8RhMmCmu+zcLICpdgKuRKZlUAnrMVv7sTYqXuR8Xpwopay1GI3FFNZVTzVA40pJQ/D0zayHK66YzkPhHXKylD9KTJdWHUBk07/xkVeNCsDurQ9v1j6mCu5r9x6EUSb54/t3rJmLnehdcEyeehJ6CFCKyWltkfb44qXZ7QNNjvuy4XeNm7FK/2aAdAOeGLlng8D06cGhhlhuJvG/aEQmq93LD33HEzmjVbobWlawByyemeTsRFHbha438hKu+QCbNpuMa40P14MGLQYjLu43HKtTuYUN4BQF6BzFmoCPnR5wk4qeilqNOackbczd3TMgQM0DgsFsOC8YWE8hAXj68HCASw8b1itkyZwFglg0XnD8p3Vtq8AiwawwLxhEc9Z8IqwlgEsNG9YiE4Hqyk/erTIbdHCV3zCAxDQSuZNy78Rr0or3BBDWFX26Vy9mlZasroWqbnuWjOlQ7mHrtZKPraFKrrIjmdB1euRM9HIvUqH1Y1ZP+e69/AI+fb4kRF+jaZ4ybR4GgYxBtWt8EMKE97FHZoQLy82eDeqX/X6EyXeRLE3kb3kYKLnHLeX/bq0h1v73NPe3Nf9vC+nzDtJyN2CmJdKjBIK6WI5SB5CXi/+O1PgBb4DGAJEqDEIAjH19qHx7n9gmbDAmbtlSOgYPKljfE8MH/vgnRwTv+yYC4Z6f8fAsG65QcdM+4z5zxwT1m5zd8zYtvRRjrw17/D28h7PbHO5ybyHv13OPe8jbx/0I+0vpt00u78O7Ond3zPo4Q8=&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g transform="translate(0.5,0.5)"><ellipse cx="260" cy="140" rx="20" ry="20" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(255.5,132.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="8" height="14" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 8px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">0</div></div></foreignObject><text x="4" y="14" fill="#000000" text-anchor="middle" font-size="14px" font-family="Helvetica">0</text></switch></g><ellipse cx="140" cy="20" rx="20" ry="20" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(135.5,12.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="8" height="14" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 8px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">2</div></div></foreignObject><text x="4" y="14" fill="#000000" text-anchor="middle" font-size="14px" font-family="Helvetica">2</text></switch></g><ellipse cx="20" cy="140" rx="20" ry="20" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(15.5,132.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="8" height="14" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 8px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">4</div></div></foreignObject><text x="4" y="14" fill="#000000" text-anchor="middle" font-size="14px" font-family="Helvetica">4</text></switch></g><ellipse cx="140" cy="260" rx="20" ry="20" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(135.5,252.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="8" height="14" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 8px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">6</div></div></foreignObject><text x="4" y="14" fill="#000000" text-anchor="middle" font-size="14px" font-family="Helvetica">6</text></switch></g><ellipse cx="220" cy="60" rx="20" ry="20" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(215.5,52.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="8" height="14" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 8px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">1</div></div></foreignObject><text x="4" y="14" fill="#000000" text-anchor="middle" font-size="14px" font-family="Helvetica">1</text></switch></g><ellipse cx="60" cy="60" rx="20" ry="20" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(55.5,52.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="8" height="14" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 8px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">3</div></div></foreignObject><text x="4" y="14" fill="#000000" text-anchor="middle" font-size="14px" font-family="Helvetica">3</text></switch></g><ellipse cx="60" cy="220" rx="20" ry="20" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(55.5,212.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="8" height="14" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 8px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">5</div></div></foreignObject><text x="4" y="14" fill="#000000" text-anchor="middle" font-size="14px" font-family="Helvetica">5</text></switch></g><ellipse cx="220" cy="220" rx="20" ry="20" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(215.5,212.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="8" height="14" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 8px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">7</div></div></foreignObject><text x="4" y="14" fill="#000000" text-anchor="middle" font-size="14px" font-family="Helvetica">7</text></switch></g><path d="M 238.71 118.71 L 161.29 41.29" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 243.49 123.49 L 233.94 120.3 L 238.71 118.71 L 240.3 113.94 Z" fill="#000000" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 156.51 36.51 L 166.06 39.7 L 161.29 41.29 L 159.7 46.06 Z" fill="#000000" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 198.71 198.71 L 81.29 81.29" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 203.49 203.49 L 193.94 200.3 L 198.71 198.71 L 200.3 193.94 Z" fill="#000000" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 76.51 76.51 L 86.06 79.7 L 81.29 81.29 L 79.7 86.06 Z" fill="#000000" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 118.71 238.71 L 41.29 161.29" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 123.49 243.49 L 113.94 240.3 L 118.71 238.71 L 120.3 233.94 Z" fill="#000000" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 36.51 156.51 L 46.06 159.7 L 41.29 161.29 L 39.7 166.06 Z" fill="#000000" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 128.85 232.04 L 71.18 87.95" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 131.36 238.3 L 123.84 231.62 L 128.85 232.04 L 132.19 228.27 Z" fill="#000000" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 68.67 81.68 L 76.2 88.37 L 71.18 87.95 L 67.84 91.71 Z" fill="#000000" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 208.85 192.04 L 151.18 47.95" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 211.36 198.3 L 203.84 191.62 L 208.85 192.04 L 212.19 188.27 Z" fill="#000000" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 148.67 41.68 L 156.2 48.37 L 151.18 47.95 L 147.84 51.71 Z" fill="#000000" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 46.54 193.07 L 33.46 166.93" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 49.56 199.11 L 41.51 193.07 L 46.54 193.07 L 49.56 189.05 Z" fill="#000000" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 30.44 160.89 L 38.49 166.93 L 33.46 166.93 L 30.44 170.95 Z" fill="#000000" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 246.54 113.07 L 233.46 86.93" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 249.56 119.11 L 241.51 113.07 L 246.54 113.07 L 249.56 109.05 Z" fill="#000000" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 230.44 80.89 L 238.49 86.93 L 233.46 86.93 L 230.44 90.95 Z" fill="#000000" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/></g></svg>
