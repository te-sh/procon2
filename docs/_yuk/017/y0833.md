---
title: No.833
problem: https://yukicoder.me/problems/no/833
---
かっこよさの管理はセグメントツリーで行う.

車両の連結についてもセグメントツリーで管理する. 車両 $$ i $$ と $$ i+1 $$ を連結するときはインデックス $$ i+1 $$ の値を $$ 1 $$ にし, 切り離すときはインデックス $$ i+1 $$ の値を $$ 0 $$ にする. こうすることで, 先頭から $$ i $$ までの合計が $$ i $$ 番目の車両が何番目の連結かが分かる.

$$ j $$ 番目の連結に含まれる両端の車両は二分探索で求められる.
