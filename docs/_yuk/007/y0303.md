---
title: No.303
problem: https://yukicoder.me/problems/no/303
---
$$ L=1 $$ のときは最小コストは $$ 1 $$ で, その組み合わせの数は $$ 1 $$ である.

$$ L=2 $$ のときは $$ 1 $$ のブロックを $$ 2 $$ つ購入し, そのうち $$ 1 $$ つを適当に分割して両端に配置すればいい. よって最小コストは $$ 3 $$ で, 組み合わせの数は無限である.

$$ L \geq 3 $$ のときについては, 中央に切れ目があるかどうかを無視した組み合わせの数を $$ C(L) $$ とすると,

$$
C(L) =
\begin{cases}
\sum_{k=1}^{\floor{L/2}} C(L-(2k-1)) + 1 & L \text{ is odd} \\
\sum_{k=1}^{\floor{L/2}} C(L-(2k-1)) & L \text{ is even}
\end{cases}
$$

となる. 中央に切れ目がある場合を除いた組み合わせの数を $$ D(L) $$ とすると,

$$
D(L) =
\begin{cases}
C(L) & L \text{ is odd} \\
C(L)-C(L/2)^2 & L \text{ is even}
\end{cases}
$$

となる. 奇数と偶数で分けて累積和を取っておけば $$ O(L) $$ で計算できる.
