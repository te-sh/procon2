---
title: "ABC #076 D"
problem: https://beta.atcoder.jp/contests/abc076/tasks/abc076_d
---
すべて整数で扱えるよう, $$ t_i, v_i $$ ともに2倍しておく. 最後に距離を4で割ればいい.

上限速度が変わるところ (時刻 $$ T_i = \sum t_i $$) で, $$ v_i \lt v_{i+1} $$ ならば $$ v = t-T_i+v_i\ (t \geq T_i) $$ が速度の上限となり, $$ v_i \gt v_{i+1} $$ ならば $$ v = -t+T_i+v_i\ (t \leq T_i) $$ が速度の上限となる. これを図で表すと下のようになる.

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="538px" height="338px" version="1.1" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36&quot; version=&quot;8.5.9&quot; editor=&quot;www.draw.io&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;abdd6fea-3412-5785-65b7-04651b59e0e9&quot; name=&quot;Page-1&quot;&gt;7ZlPc6MgGMY/jXcFY+xxN/136czO9LBnVogyRckgaZL99EsCaNRtbRjswSSHjDzCCz4/0BcN4KrcPwm0KV44JiwAId4H8D4AYJkm6v8oHLSQJLEWckGxlqJWeKV/iRFDo24pJnWnouScSbrpihmvKpLJjoaE4LtutTVn3V43KCcD4TVDbKj+plgWWk3BstWfCc0L23OU3Okzf1D2lgu+rUx/AYDr00+fLpGNZS60LhDmuzMJPgRwJTiX+qjcrwg7Wmtt0+0ePzjbjFuQSn6lAdAN3hHbEjvi07jkwXpBKvzjaKkqZQzVNc0C+LOQJVNCpA5rKfhbYxNUyppX0jCNYlXWIQkeeN6OMmquXU0pwksixUFV2bXmL4xjxZnvVhOEIUnfu+GRmQN5E67p4RenqmMQmumamjBmssa2bCPUfCsyYhqdm/l5nCjpxZFI5EQO4qiDs4tupROq/2ODN2z+sCXhSCB/3OKLuFW8IjOHBvtr5KvQmsX1USB/0BZXD21gNnCkBuKRQP6oJVdPrW82CF2ppSOB/FFb3qj1zXZ9rMFkJJA/aunVUxuYHTtSi8ORQP6o3V09tb7ZztlIPJbW+KNmt8iXYcOoLgg24GbFcDQRdL1fTrh9i6Ibw4vSQte755QMwY3hJHlLf0FPyfCy9yizZziaMro+D6dk6LQ9ny9DbzkN+MZ7qdNmfb4MF7116Pxqs/9gnZKh09Z9vgx9vZ2eLqVRxfZDk67efsyDD/8A&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g transform="translate(0.5,0.5)"><path d="M 8 328 L 8 18.1" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 8 11.35 L 12.5 20.35 L 8 18.1 L 3.5 20.35 Z" fill="#000000" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 8 328 L 517.9 328" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 524.65 328 L 515.65 332.5 L 517.9 328 L 515.65 323.5 Z" fill="#000000" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 8 208 L 88 208" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 88 168 L 168 168" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 168 48 L 208 48" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 208 128 L 288 128" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 288 88 L 328 88" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 328 208 L 408 208" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 88 208 L 288 8" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="none"/><path d="M 168 168 L 328 8" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="none"/><path d="M 208 128 L 88 8" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="none"/><path d="M 288 128 L 408 8" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="none"/><path d="M 328 208 L 128 8" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="none"/><path d="M 488 328 L 168 8" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="none"/><path d="M 8 328 L 328 8" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="none"/></g></svg>

あとは各時刻ごとに上限の最も低い速度を採用し, できた図の面積を求めればいい.
