---
title: "ARC #043 C"
problem: https://beta.atcoder.jp/contests/arc043/tasks/arc043_c
---
数列 $$ A $$ が $$ 1, 2, 3, \dots $$ と並ぶように数値の変換を行う.

そして数列 $$ B $$ の転倒数を計算する. これは Fenwick Tree を使う. 転倒数が奇数ならば中間の転倒数の数列は存在しない.

その後数列 $$ B $$ をバブルソートの要領でソートしていき, 置換回数が半分の転倒数だけ行われるようにする. これは数値の出現位置を覚えておいて $$ 1 $$ から順番に前に詰められるだけ詰めて, 詰めた分を転倒数から引いていく方法で行う. 詰めた分の計算にはここでも Fenwick Tree を使う.

最後に変換した数値を元に戻す.
