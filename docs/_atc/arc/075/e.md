---
title: "ARC #075 E"
problem: https://beta.atcoder.jp/contests/arc075/tasks/arc075_c
---
数列 $$ b = \{ a_1-K, a_2-K, a_N-K \} $$ を考える. $$ a $$ の連続する部分列の算術平均が $$ K $$ 以上というのは, $$ b $$ の連続する部分列の総和が $$ 0 $$ 以上というのと同じである.

そこで, $$ b $$ の累積和を計算し, これを $$ c $$ とする.

こうすると, $$ l = i $$ のときの $$ r $$ の個数は, $$ \{ c_j \geq c_{l-1} \ \vert \ j \in [l, N] \} $$ となる $$ c_j $$ の数となる. ただし, $$ c_0 = 0 $$ である.

このような数を数えるには, $$ c $$ を座標圧縮してセグメントツリーに載せる方法が考えられる.
