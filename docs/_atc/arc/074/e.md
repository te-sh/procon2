---
title: "ARC #074 E"
problem: https://beta.atcoder.jp/contests/arc074/tasks/arc074_c
---
$$ C(r, g, b) $$ を最後に赤/緑/青が現れた位置が $$ r, g, b $$ であるときの塗り方の組み合わせの数とする.

そうすると, $$ k = \max(r, g, b) $$ とすると, この次を赤に塗ったとすると, $$ C(k+1, g, b) $$ に遷移する.

次に条件を満たさないものをはじく.

最後に赤を塗ったとして, そのときの $$ C(k, g, b) $$ を見る. $$ x_i = 1 $$ ならば $$ g \lt l_i, r \lt r_i $$ でなければならないし, $$ x_i = 2 $$ ならば $$ g \lt l_i, r \lt l_i $$ のどちらか片方のみ成り立たないといけない. これらが成立しない $$ g, b $$ については $$ C(k, g, b) = 0 $$ としてしまおう.
