---
title: "ARC #045 C"
problem: https://atcoder.jp/contests/arc045/tasks/arc045_c
---
$$ a $$ から $$ b $$ へのパス上の xor 和は, $$ a $$ から根への xor 和と $$ b $$ から根への xor 和の xor 和である. $$ a $$ - 根 - $$ b $$ のパス上の重複している部分は xor を取れば消える.

よって, 頂点ごとに根までの xor 和を計算しておき, 二分探索なり連想配列なりで頂点ごとに xor を取った結果が $$ X $$ になる個数を数えていけばいい. 最後に重複分があるので2で割る.

なお, $$ X = 0 $$ のときは自分を含めて数えてしまうのでその分は引かなければならない.
