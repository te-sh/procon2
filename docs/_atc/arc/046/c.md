---
title: "ARC #046 C"
problem: https://atcoder.jp/contests/arc046/tasks/arc046_c
---
男女合わせた集合を用意し, この集合を $$ A_i, D_i $$ でソートする. ただし, 同じ値の場合は女性が先になるようにする. そして $$ A_i, D_i $$ が小さい順に取り出し, それが女性なら待合集合に入れ, 男性なら待合集合に女性が居れば任意の女性とカップルになるようにすれば部分点を取ることができる.

しかし, $$ B_i \leq C_j $$ とは限らない場合は任意の女性とはカップルになれない. この場合は待合集合にいる女性の中で $$ C_i $$ が　$$ B_i $$ より大きい女性のうち最も $$ C_i $$ が小さい女性とカップルになるのが最適である.

これは待合集合を赤黒木で管理すれば高速に処理できる.
