---
title: "ARC #077 E"
problem: https://beta.atcoder.jp/contests/arc077/tasks/arc077_c
---
$$ a_i $$ から $$ a_{i+1} $$ に切り替えるとき, 順送りボタンで進めていく途中にお気に入りの明るさがあるならば, お気に入りボタンを使う方が回数が少なくなる.

そこで, $$ x = i $$ から $$ i+1 $$ に変更したときに, ボタンを使う回数がどう変化するかを考える.

区間 $$ [a_j+1, a_{j+1}] $$ 内に $$ x $$ がある区間の数を数えておく.

* $$ x $$ が増えると区間 $$ [a_j+1, a_{j+1}] $$ 内に $$ x $$ があればボタンを押す回数は1減るので, 区間の数だけボタンを押す回数は減る.

* $$ a_{j+1} = i $$ となる $$ j $$ については, $$ x $$ が区間から外れることになるので, 区間の数は1減り, $$ a_{j+1} \gt a_j $$ ならば $$ a_{j+1}-a_i $$, そうでなければ $$ a_{j+1}+m-a_j $$ だけボタンを押す回数は増える.

* $$ a_j = i $$ となる $$ j $$ については, $$ x $$ が区間に入るので, 区間の数が1増える.

$$ x = 1 $$ のときのボタンの操作回数は愚直に計算し, 以下 $$ x = 2,3, \dots , m $$ のときのボタンの操作回数を上のやり方で計算して最小値を求める.
