---
title: "ARC #066 E"
problem: https://beta.atcoder.jp/contests/arc066/tasks/arc066_c
---
`+` の直後は括弧を開く意味はない. また, `-` の直後は必ず括弧を開くと考える. 次の数値の直後で括弧を閉じれば実質括弧を開かなかったことと同じになる.

$$ A(i, j) $$ を, $$ i $$ 番目の数値まで見たときに $$ j $$ 個括弧が開いた状態での最大値とする.

ただし, このままでは $$ O(N^2) $$ となって解けない.

しかし, $$ A-(B-(C-(D-(E- \dots = A-(B-(C))-(D-(E- \dots $$ となるので, 括弧を2つ開いた状態でさらに括弧を開く場合は, 直前の2つの括弧を閉じてしまえばいい. これで $$ j $$ の最大値は2となり, $$ O(N) $$ で解くことができる.
