---
title: "ABC #128 E"
problem: https://atcoder.jp/contests/abc128/tasks/abc128_e
---
$$ [S_i, T_i) $$ の時間で座標 $$ X_i $$ が通行止めになるということは, $$ [S_i-X_i, T_i-X_i) $$ の時間に出発した人は高々 $$ X_i $$ しか進めないということになる.

すなわち, $$ D_i $$ に出発した人は $$ D_i $$ を含む $$ [S_j-X_j, T_j-X_j) $$ のうちの最小の $$ X_j $$ しか進めない.

ここで以下の3種類のクエリを考える.

* 今の時点での $$ X_i $$ の集合に新たな $$ X_j $$ を追加する.
* 今の時点での $$ X_i $$ の集合の最小値を返す.
* 今の時点での $$ X_i $$ の集合からそのうちのひとつ $$ X_j $$ を削除する.

時刻 $$ S_i-X_i $$ で最初のクエリを実行し, 時刻 $$ D_i $$ で2番目のクエリを実行し, 時刻 $$ T_i-X_i $$ で3番目のクエリを実行するようにすれば, 求める動作になる. 最初にクエリを作り上げておき, 時刻でソートしておけばいい.

$$ X_i $$ の集合は最小値を返す赤黒木で管理する.
