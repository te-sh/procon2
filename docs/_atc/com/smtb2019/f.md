---
title: "SMTB2010 F"
problem: https://atcoder.jp/contests/sumitrust2019/tasks/sumitb2019_f
---
高橋くんを固定して青木くんを相対的に見る.

青木くんは最初の $$ T_1 $$ 分間は $$ C_1 = B_1-A_1 $$ の速度で移動し, 次の $$ T_2 $$ 分間は $$ C_2 = B_2-A_2 $$ の速度で移動している. $$ C_1 $$ と $$ C_2 $$ の符号が同じ場合は $$ 1 $$ 度も出会わない. 以下 $$ C_1 \gt 0, \ C_2 \lt 0 $$ となるように符号を反転させる. こうしても答えは変わらない.

青木くんは $$ T_1 $$ 分後には $$ P_1 = C_1 T_1 $$ に, さらに $$ T_2 $$ 分後には $$ P_2 = P_1 + C_2 T_2 $$ にいる. $$ P_2 \gt 0 $$ ならば $$ 1 
$$ 度も出会わない. また $$ P_2 = 0 $$ なら無限回出会う.

$$ T = T_1 + T_2 $$ 分を 1 回のサイクルとすると, 最初のサイクルでは $$ 1 $$ 度出会う. $$ n $$ 回目のサイクルでは, $$ nT + T_1 $$ 分後の位置 $$ P^n_1 = P_1 + (n-1)P_2 $$ について $$ P^n_1 \gt 0 $$ なら $$ 2 $$ 回出会い, $$ P^n_1 = 0 $$ なら $$ 1 $$ 回出会い, $$ P^n \lt 0 $$ なら $$ 1 $$ 回も出会わない.

これを解くと, $$ n \lt -P_1/P_2 + 1 $$ なら $$ 2 $$ 回出会うので, $$ 2 $$ 回出会うサイクル数は $$ \ceil{-P_1/P_2} - 1 $$ となる. また $$ 1 $$ 回出会うサイクル数は $$ P_1/P_2 $$ が整数となる場合に $$ 2 $$, そうでない場合に $$ 1 $$ となる.
